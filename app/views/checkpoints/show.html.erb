<h1> <%="Checkpoint: #{@checkpoint.id}"%> </h1>
<br>
<table class="table table-dark table-striped">
  <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Recurso</th>
      <th scope="col">Link</th>
      <th scope="col">Current Rating</th>
      <th scope="col">Rate</th>
    </tr>
  </thead>
  <% @checkpoint.resources.each do |resource|%>
  <tbody>
    <tr>
      <th scope="row"> <%= resource.id %> </th>
      <td> <%= resource.title %></td>
      <td> <%= resource.link %></td>
      <td> <%= ResourceRatingCalculator.calculate_resource_rating(resource) %> </td>
      <td>
      <%= form_with url: rate_resource_roadmap_checkpoint_path(@roadmap, @checkpoint), model: resource, method: "post" do |form| %>
        <%= form.hidden_field :resource_id, value: resource.id %>
        <%= form.number_field :rating, in: 1..5, step: 1 %>      
        <%= form.submit "Evaluar" %>
      <% end %>
      </td>
    </tr>    
  </tbody>
  <% end %>
</table>

<%= form_with url: create_resource_roadmap_checkpoint_path(@roadmap, @checkpoint), model: Resource, method: "post" do |form| %>
  <%= form.label :label_title, "TÃ­tulo"%>
  <%= form.text_field :title, in: 1..5, step: 1 %>
  <%= form.label :label_link, "Link"%>
  <!-- TODO: change to url_field -->
  <%= form.text_field :link, in: 1..5, step: 1 %>
  <%= form.submit "Crear recurso" %>
<% end %>
